<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Party Hat Store</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/main.css">
    <script type='text/javascript' src="http://underscorejs.org/underscore-min.js"></script>
    <script type='text/javascript' src="templates/miniPage.js"></script>
  </head>
<body>

  <header id = "top">
  <div class="forms">
  <form action="/list">
    <label for="POST-search">  <a href= "index.html">Insert image</a></label>
    <input id="POST-search" type="text" name="search" placeholder= "Search for hats">
    <input id="POST-submit" type="submit" value="Submit">
  </form>
  </div>
  <p style= "text-align: right padding: 20px"> <a href= "checkout.html">My Cart</a></p>
  </header>

  <section id = "banner"> 
  Here we will put featured products
  </section>
  <br>
  <ul id="hats">
  </ul>
</body>

 
<script>

var req = new XMLHttpRequest();
req.onreadystatechange = function() {
if(req.readyState == XMLHttpRequest.DONE && req.status === 200){
	var hatObjList = JSON.parse(req.responseText);
	var hatList = document.getElementById('hats');
	console.log('here1');
	hatObjList.forEach(function (el, index) {
		hatList.innerHTML += compiled({el});
           console.log(compiled({el}));
	});
	console.log('here1');
}
}
console.log('hello');
req.open('GET', '/list?search=&data=true');
req.send();

</script>

</html>